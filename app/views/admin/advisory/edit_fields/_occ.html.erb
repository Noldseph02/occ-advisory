<% cnt = 0 %>
<% AdvisoryCategory.where(advisory_reason_id: params[:id]).order(:created_at).each do |ac| %>
<div id="panel-category">
  <div class="panel panel-default <%= 'additional-category' if cnt > 0 %>" id="<%= cnt > 0 ? "additional-category#{ac.id}" : 'main-category' %>">
    <div class="panel-heading">
      <%= hidden_field_tag nil, nil, name: "advisory[advisory_reasons_attributes][0][advisory_categories_attributes][#{cnt}][id]", value: ac.id  %>
      <%= 'Additional' if cnt > 0 %> Category
      <% if cnt > 0 %>
        <button onclick="delete_category(<%= ac.id %>)" class="btn-link pull-right">
          <span class="glyphicon glyphicon-trash"></span>
        </button>
      <% else %>
        <button type="button" onclick="add_category()" class="btn-link pull-right">
          <span class="glyphicon glyphicon-plus"></span>
        </button>
      <% end %>
    </div>
    <div class="panel-body">
      <div class="form-group">
        <div class="col-sm-6">
          <div class="row">
            <div class="col-sm-3 text-right">
              <label class="form-label">Category:</label>
            </div>
            <div class="col-sm-9">
            <%= select('','', Category.where(id: [11..19]).order(:category).collect { |c| [c.category, c.id] }, { selected: ac.category_id, include_blank: true }, id: 'select-adv-category', class: 'form-control field', 'data-field': 'category_id', onchange: 'select_advisory_category(this)', name: "advisory[advisory_reasons_attributes][0][advisory_categories_attributes][#{cnt}][category_id]") %>
            
            </div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-6 mb-15">
          <div class="row">
            <div class="col-sm-3 text-right">
              <label class="form-label">Flight Date</label>
            </div>
            <div class="col-sm-9">
              <div class="input-group">
                <%= text_field_tag nil, nil, class: 'form-control has-date-picker field', 'data-field': 'flight_date', required: true, name: "advisory[advisory_reasons_attributes][0][advisory_categories_attributes][#{cnt}][flight_date]", value: ac.flight_date %>
                <span class="input-group-addon">
                  <span class="glyphicon glyphicon-calendar"></span>
                </span>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 mb-15">
          <div class="row">
            <div class="col-sm-3 text-right">
              <label class="form-label">Flight Number</label>
            </div>
            <div class="col-sm-9">
              <div class="input-group">
                <span class="input-group-addon">X</span>
                <%= text_field_tag nil, nil, 'data-field': 'flight_number', class: 'form-control field', name: "advisory[advisory_reasons_attributes][0][advisory_categories_attributes][#{cnt}][flight_number]", value: ac.flight_number %>
              </div>
            </div>
          </div>
        </div>

        <div class="col-sm-6 mb-15">
          <div class="row">
            <div class="col-sm-3 text-right">
              <label class="form-label">Route</label>
            </div>
            <div class="col-sm-9">
              <div class="row">
                <div class="col-sm-6">
                  <%= text_field_tag nil, nil, 'data-field': 'route_origin', class: 'form-control field', placeholder: 'Origin', name: "advisory[advisory_reasons_attributes][0][advisory_categories_attributes][#{cnt}][route_origin]", value: ac.route_origin %>
                </div>
                <div class="col-sm-6">
                  <%= text_field_tag nil, nil, 'data-field': 'route_destination', class: 'form-control field', placeholder: 'Destination', name: "advisory[advisory_reasons_attributes][0][advisory_categories_attributes][#{cnt}][route_destination]", value: ac.route_destination %>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 mb-15">
          <div class="row">
            <div class="col-sm-3 text-right">
              <label class="form-label">Aircraft Registry</label>
            </div>
            <div class="col-sm-9">
              <div class="input-group">
                <span class="input-group-addon">RP-N</span>
                <%= text_field_tag nil, nil, 'data-field': 'ac_registry', class: 'form-control field', name: "advisory[advisory_reasons_attributes][0][advisory_categories_attributes][#{cnt}][ac_registry]", value: ac.ac_registry %>
              </div>
            </div>
          </div>
        </div>

        <div class="col-sm-6 mb-15">
          <div class="row">
            <div class="col-sm-3 text-right">
              <label class="form-label">Aircraft Type</label>
            </div>
            <div class="col-sm-9">
              <%= select(nil, nil, AircraftType.all.order(:ac_type).collect { |l| [l.ac_type, l.id] }, { selected: ac.aircraft_type_id,include_blank: true }, 'data-field': 'aircraft_type_id', class: 'form-control field', name: "advisory[advisory_reasons_attributes][0][advisory_categories_attributes][#{cnt}][aircraft_type_id]") %>
            </div>
          </div>
        </div>
        <div class="col-sm-6 mb-15">
          <div class="row">
            <div class="col-sm-3 text-right">
              <label class="form-label">Aircraft Configuration</label>
            </div>
            <div class="col-sm-9">
              <%= text_field_tag nil, nil, 'data-field': 'ac_configuration', class: 'form-control field', name: "advisory[advisory_reasons_attributes][0][advisory_categories_attributes][#{cnt}][ac_configuration]", value: ac.ac_configuration %>
            </div>
          </div>
        </div>

        <div class="col-sm-6 mb-15 <%= 'hidden' unless [17,11,12].include?(ac.category_id) %>">
          <div class="row">
            <div class="col-sm-3 text-right">
              <label class="form-label">Estimated Time Departure</label>
            </div>
            <div class="col-sm-9">
              <div class="input-group">
                <%= text_field_tag nil, nil, class: 'form-control has-time-picker field', 'data-field': 'etd', required: true, name: "advisory[advisory_reasons_attributes][0][advisory_categories_attributes][#{cnt}][etd]", value: ac.etd, disabled: ('disabled' unless [17,11,12].include?(ac.category_id)) || false %>
                <span class="input-group-addon">
                  <span class="glyphicon glyphicon-time"></span>
                </span>
              </div>
            </div>
          </div>
        </div>

        <div class="col-sm-6 mb-15 <%= 'hidden' unless [17,11,12].include?(ac.category_id) %>">
          <div class="row">
            <div class="col-sm-3 text-right">
              <label class="form-label">Estimated Time Arrival</label>
            </div>
            <div class="col-sm-9">
              <div class="input-group">
                <%= text_field_tag nil, nil, class: 'form-control has-time-picker field', 'data-field': 'eta', required: true, name: "advisory[advisory_reasons_attributes][0][advisory_categories_attributes][#{cnt}][eta]", value: ac.eta, disabled: ('disabled' unless [17,11,12].include?(ac.category_id)) || false %>
                <span class="input-group-addon">
                  <span class="glyphicon glyphicon-time"></span>
                </span>
              </div>
            </div>
          </div>
        </div>

        <div class="col-sm-6 mb-15 <%= 'hidden' unless [11].include?(ac.category_id) %>">
          <div class="row">
            <div class="col-sm-3 text-right">
              <label class="form-label">New Estimated Time Departure</label>
            </div>
            <div class="col-sm-9">
              <div class="input-group">
                <%= text_field_tag nil, nil, class: 'form-control has-time-picker field', 'data-field': 'netd', required: true, name: "advisory[advisory_reasons_attributes][0][advisory_categories_attributes][#{cnt}][netd]", value: ac.netd, disabled: ('disabled' unless [11].include?(ac.category_id)) || false %>
                <span class="input-group-addon">
                  <span class="glyphicon glyphicon-time"></span>
                </span>
              </div>
            </div>
          </div>
        </div>

        <div class="col-sm-6 mb-15 <%= 'hidden' unless [11].include?(ac.category_id) %>">
          <div class="row">
            <div class="col-sm-3 text-right">
              <label class="form-label">New Estimated Time Arrival</label>
            </div>
            <div class="col-sm-9">
              <div class="input-group">
                <%= text_field_tag nil, nil, class: 'form-control has-time-picker field', 'data-field': 'neta', required: true, name: "advisory[advisory_reasons_attributes][0][advisory_categories_attributes][#{cnt}][neta]", value: ac.neta, disabled: ('disabled' unless [11].include?(ac.category_id)) || false %>
                <span class="input-group-addon">
                  <span class="glyphicon glyphicon-time"></span>
                </span>
              </div>
            </div>
          </div>
        </div>

        <div class="col-sm-6 mb-15 <%= 'hidden' unless [11].include?(ac.category_id) %>">
          <div class="row">
            <div class="col-sm-3 text-right">
              <label class="form-label">Duration Of Delay</label>
            </div>
            <div class="col-sm-9">
              <div class="input-group">
                <%= text_field_tag nil, nil, class: 'form-control has-time-picker field', 'data-field': 'duration_of_delay', required: true, name: "advisory[advisory_reasons_attributes][0][advisory_categories_attributes][#{cnt}][duration_of_delay]", value: ac.duration_of_delay, disabled: ('disabled' unless [11].include?(ac.category_id)) || false %>
                <span class="input-group-addon">
                  <span class="glyphicon glyphicon-time"></span>
                </span>
              </div>
            </div>
          </div>
        </div>

        <div class="col-sm-6 mb-15 <%= 'hidden' unless [19,12].include?(ac.category_id) %>">
          <div class="row">
            <div class="col-sm-3 text-right">
              <label class="form-label">Departure Terminal</label>
            </div>
            <div class="col-sm-9">
              <%= select(nil, nil, [['Terminal A', 'A'], ['Terminal B', 'B'], ['Terminal C', 'C']], { selected: ac.departure_terminal, include_blank: 'Select Terminal'}, 'data-field': 'departure_terminal', class: 'form-control field', required: true, name: "advisory[advisory_reasons_attributes][0][advisory_categories_attributes][#{cnt}][departure_terminal]", disabled: ('disabled' unless [19,12].include?(ac.category_id)) || false ) %>
            </div>
          </div>
        </div>

        <div class="col-sm-6 mb-15 <%= 'hidden' unless [19,12].include?(ac.category_id) %>">
          <div class="row">
            <div class="col-sm-3 text-right">
              <label class="form-label">Arrival Terminal</label>
            </div>
            <div class="col-sm-9">
              <%= select(nil, nil, [['Terminal A', 'A'], ['Terminal B', 'B'], ['Terminal C', 'C']], { selected: ac.arrival_terminal, include_blank: 'Select Terminal'}, 'data-field': 'arrival_terminal', class: 'form-control field', required: true, name: "advisory[advisory_reasons_attributes][0][advisory_categories_attributes][#{cnt}][arrival_terminal]", disabled: ('disabled' unless [19,12].include?(ac.category_id)) || false)  %>
            </div>
          </div>
        </div>

        <div class="col-sm-6 mb-15 <%= 'hidden' unless [15,11].include?(ac.category_id) %>">
          <div class="row">
            <div class="col-sm-3 text-right">
              <label class="form-label">Number Of Passenger</label>
            </div>
            <div class="col-sm-9">
              <%= text_field_tag nil, nil, 'data-field': 'pax', class: 'form-control field', required: true, name: "advisory[advisory_reasons_attributes][0][advisory_categories_attributes][#{cnt}][pax]", value: ac.pax, disabled: ('disabled' unless [15,11].include?(ac.category_id)) || false %>
            </div>
          </div>
        </div>

        <div class="col-sm-6 mb-15">
          <div class="row">
            <div class="col-sm-3 text-right">
              <label class="form-label">Remarks</label>
            </div>
            <div class="col-sm-9">
              <%= text_area_tag nil, ac.remarks, 'data-field': 'remarks', class: 'form-control field', name: "advisory[advisory_reasons_attributes][0][advisory_categories_attributes][#{cnt}][remarks]" %>
            </div>
          </div>
        </div>


      </div>
    </div>
  </div>
</div>
<% cnt += 1 %>
<% end %>
